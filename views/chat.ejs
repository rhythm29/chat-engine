<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8">
      <title><%= name %>'s Board</title>

  </head>
  <body>
  <h1> Welcome <%= name %> </h1>
    <form id = "chat" method= "post">
      <label>
      Receiver:
      <input type="text" name="receiver" />
      <input type="hidden" name="sender" value= "<%= name %>" />
      <input type="hidden" name="type" value="push" />

      </label>
      <label>
      Message:
      <input type="text" name="msg" />
      </label>
      <input type="button" onClick="send()" name="action" value="Submit" />
    </form>
    <script>
      function send(){
       var xhttp = new XMLHttpRequest();
       xhttp.onreadystatechange = function() {
         if (this.readyState == 4 && this.status == 200) {
         document.getElementById("chat").innerHTML = this.responseText;
        }
      };
     xhttp.open("POST", "http://localhost:3000", true);
      xhttp.setRequestHeader("Content-type", "application/json");
     xhttp.send(JSON.stringify(objectifyForm(document.getElementById("chat"))));
    }


      function objectifyForm(formArray) {//serialize data function
        var obj = {};
        obj.sender = 
        obj.type = "push"
        for (var i = 0; i < formArray.length; i++){
         obj[formArray[i]['name']] = formArray[i]['value'];
        }
        return obj;
      }
    </script>
  </body>
</html>

<!--
 Object { name="Mangat",  msg="Du Hast",  ="Submit"}

 var msg = {
  "sender": client1,
  "receiver": client2,
  "type": "push",
  "msg": "Ich Leibe Berlin"
};


-->
